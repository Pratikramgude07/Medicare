{% include "header.html" %}
{% load static %}

<div class="container mt-5">
  <div class="row">
    <!-- UPI and Wallets Section -->
    <div class="col-md-9">
      <!-- UPI Section -->
      <div class="card mb-4">
        <div class="card-body">
          <h4 class="card-title text-center "><b> <u>Customer Details</u> </b></h4>

          <br>

          <div class="row align-items-center">
            <div class="col-sm-8 mb-2 mb-sm-0">
              <p><strong>Customer Name : </strong> {{request.user.username}}</p>
              <p><strong>Customer Email ID : </strong>{{request.user.email}}</p>
              <p><strong>Customer Mobile : </strong>{{request.user.first_name}}</p>
            </div>
            <button id="rzp-button1" class="mx-auto p-2 text-white" style="width: 150px;background-color: black;">Pay with Razorpay</button>
            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
            <script>
              var options = {
                "key": "rzp_test_I7C0Tt7if7jjRS", // Enter the Key ID generated from the Dashboard
                "amount": '{{payment.amount}}', // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                "currency": "INR",
                "name": "Ecomere.pvt ltd",
                "description": "Test Transaction",
                "image": "https://example.com/your_logo",
                "order_id": "{{payment.id}}", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                "handler": function (response) {
                  // alert(response.razorpay_payment_id);
                  // alert(response.razorpay_order_id);
                  // alert(response.razorpay_signature)
                  window.location.href = "http://127.0.0.1:8000/paymentsuccess"
                },
                "prefill": {
                  "name": "Gaurav Kumar",
                  "email": "gaurav.kumar@example.com",
                  "contact": "9000090000"
                },
                "notes": {
                  "address": "Razorpay Corporate Office"
                },
                "theme": {
                  "color": "#3399cc"
                }
              };
              var rzp1 = new Razorpay(options);
              rzp1.on('payment.failed', function (response) {
                alert(response.error.code);
                alert(response.error.description);
                alert(response.error.source);
                alert(response.error.step);
                alert(response.error.reason);
                alert(response.error.metadata.order_id);
                alert(response.error.metadata.payment_id);
              });
              document.getElementById('rzp-button1').onclick = function (e) {
                rzp1.open();
                e.preventDefault();
              }
            </script>




          </div>
        </div>
      </div>

      <!-- Wallets Section -->

    </div>

    <!-- Bill Summary Section -->

  </div>
</div>







{% include "footer.html" %}